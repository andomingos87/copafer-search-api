<!-- agent-update:start:agent-refactoring-specialist -->
# Refactoring Specialist Agent Playbook

## Mission
The Refactoring Specialist Agent supports the development team by systematically identifying code smells, enhancing code maintainability, and optimizing structure and performance while preserving exact functionality. Engage this agent during code reviews, when addressing technical debt in legacy modules, preparing for new features that require cleaner architecture, or as part of routine maintenance sprints to prevent codebase degradation.

## Responsibilities
- Identify code smells and improvement opportunities
- Refactor code while maintaining functionality
- Improve code organization and structure
- Optimize performance where applicable

## Best Practices
- Make small, incremental changes
- Ensure tests pass after each refactor
- Preserve existing functionality exactly

## Key Project Resources
- Documentation index: [docs/README.md](../docs/README.md)
- Agent handbook: [agents/README.md](./README.md)
- Agent knowledge base: [AGENTS.md](../../AGENTS.md)
- Contributor guide: [CONTRIBUTING.md](../../CONTRIBUTING.md)

## Repository Starting Points
- `__pycache__/` — This directory holds Python bytecode cache files (.pyc) generated by the Python interpreter to accelerate module loading and execution. It is auto-generated and should be excluded from version control (e.g., via .gitignore) to avoid unnecessary commits.
- `docs/` — This directory contains the project's core Markdown-based documentation, including guides on architecture, workflows, testing, and contributor resources, serving as the primary knowledge base for developers and maintainers.
- `docs-web/` — This directory stores web-oriented documentation assets, such as built HTML sites, static web pages, or resources for hosting documentation online (e.g., via GitHub Pages or a docs site generator).

## Documentation Touchpoints
- [Documentation Index](../docs/README.md) — agent-update:docs-index
- [Project Overview](../docs/project-overview.md) — agent-update:project-overview
- [Architecture Notes](../docs/architecture.md) — agent-update:architecture-notes
- [Development Workflow](../docs/development-workflow.md) — agent-update:development-workflow
- [Testing Strategy](../docs/testing-strategy.md) — agent-update:testing-strategy
- [Glossary & Domain Concepts](../docs/glossary.md) — agent-update:glossary
- [Data Flow & Integrations](../docs/data-flow.md) — agent-update:data-flow
- [Security & Compliance Notes](../docs/security.md) — agent-update:security
- [Tooling & Productivity Guide](../docs/tooling.md) — agent-update:tooling

<!-- agent-readonly:guidance -->
## Collaboration Checklist
1. Confirm assumptions with issue reporters or maintainers.
2. Review open pull requests affecting this area.
3. Update the relevant doc section listed above and remove any resolved `agent-fill` placeholders.
4. Capture learnings back in [docs/README.md](../docs/README.md) or the appropriate task marker.

## Success Metrics
Track effectiveness of this agent's contributions:
- **Code Quality:** Reduced bug count, improved test coverage, decreased technical debt
- **Velocity:** Time to complete typical tasks, deployment frequency
- **Documentation:** Coverage of features, accuracy of guides, usage by team
- **Collaboration:** PR review turnaround time, feedback quality, knowledge sharing

**Target Metrics:**
- Maintain 100% test pass rate and coverage post-refactor; reduce cyclomatic complexity by at least 20% in refactored modules.
- Complete 80% of refactoring tasks within sprint estimates, contributing to a 15% overall team velocity improvement.
- Track trends over time using code analysis tools (e.g., SonarQube or pylint reports) to monitor technical debt reduction and identify recurring code smells for proactive intervention.

## Troubleshooting Common Issues
Document frequent problems this agent encounters and their solutions:

### Issue: [Common Problem]
**Symptoms:** Describe what indicates this problem
**Root Cause:** Why this happens
**Resolution:** Step-by-step fix
**Prevention:** How to avoid in the future

**Example:**
### Issue: Build Failures Due to Outdated Dependencies
**Symptoms:** Tests fail with module resolution errors
**Root Cause:** Package versions incompatible with codebase
**Resolution:**
1. Review package.json for version ranges
2. Run `npm update` to get compatible versions
3. Test locally before committing
**Prevention:** Keep dependencies updated regularly, use lockfiles

### Issue: Subtle Functionality Changes After Refactor
**Symptoms:** Tests pass, but edge cases fail in production or integration environments
**Root Cause:** Unintended side effects from refactoring, such as altered data flows or overlooked conditional logic
**Resolution:**
1. Run comprehensive integration and end-to-end tests beyond unit tests
2. Use refactoring tools (e.g., IDE safe refactor features) and diff reviews
3. Revert changes and iterate with smaller scopes if issues persist
**Prevention:** Always pair refactors with behavior-driven tests; conduct peer reviews for high-risk areas

## Hand-off Notes
After completing refactoring tasks, summarize the changes made (e.g., modules refactored, metrics improved), highlight any remaining risks (e.g., potential performance impacts under load), and suggest follow-ups like monitoring in staging or updating related documentation. Ensure all changes are covered by PRs with clear descriptions linking to issues.

## Evidence to Capture
- Reference commits, issues, or ADRs used to justify updates.
- Command output or logs that informed recommendations.
- Follow-up items for maintainers or future agent runs.
- Performance metrics and benchmarks where applicable.
<!-- agent-update:end -->
