<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Products API - Documenta√ß√£o</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                <span class="logo-text">Search API</span>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <span></span>
            </button>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <h3 class="nav-title">In√≠cio</h3>
                <ul class="nav-list">
                    <li><a href="#overview" class="nav-link active" data-section="overview">
                        <span class="nav-icon">üìö</span>Vis√£o Geral
                    </a></li>
                    <li><a href="#endpoints" class="nav-link" data-section="endpoints">
                        <span class="nav-icon">üîå</span>Endpoints da API
                    </a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3 class="nav-title">Arquivos Principais</h3>
                <ul class="nav-list">
                    <li><a href="#api" class="nav-link" data-section="api">
                        <span class="nav-icon">üöÄ</span>api.py
                    </a></li>
                    <li><a href="#search" class="nav-link" data-section="search">
                        <span class="nav-icon">üîç</span>search_products.py
                    </a></li>
                    <li><a href="#ingest-csv" class="nav-link" data-section="ingest-csv">
                        <span class="nav-icon">üì•</span>ingest_csv.py
                    </a></li>
                    <li><a href="#ingest-api" class="nav-link" data-section="ingest-api">
                        <span class="nav-icon">üåê</span>ingest_api.py
                    </a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3 class="nav-title">M√≥dulos de Neg√≥cio</h3>
                <ul class="nav-list">
                    <li><a href="#paint" class="nav-link" data-section="paint">
                        <span class="nav-icon">üé®</span>paint_estimator.py
                    </a></li>
                    <li><a href="#vtex-shipping" class="nav-link" data-section="vtex-shipping">
                        <span class="nav-icon">üöö</span>vtex_shipping.py
                    </a></li>
                    <li><a href="#vtex-client" class="nav-link" data-section="vtex-client">
                        <span class="nav-icon">üîó</span>vtex_client.py
                    </a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3 class="nav-title">Utilit√°rios</h3>
                <ul class="nav-list">
                    <li><a href="#fetch-cubo" class="nav-link" data-section="fetch-cubo">
                        <span class="nav-icon">üìä</span>fetch_cubo_produtos.py
                    </a></li>
                    <li><a href="#head-csv" class="nav-link" data-section="head-csv">
                        <span class="nav-icon">‚úÇÔ∏è</span>head_csv.py
                    </a></li>
                    <li><a href="#count-csv" class="nav-link" data-section="count-csv">
                        <span class="nav-icon">üî¢</span>count_csv_rows.py
                    </a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3 class="nav-title">Debug & Testes</h3>
                <ul class="nav-list">
                    <li><a href="#debug" class="nav-link" data-section="debug">
                        <span class="nav-icon">üîß</span>Scripts de Debug
                    </a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3 class="nav-title">Configura√ß√£o</h3>
                <ul class="nav-list">
                    <li><a href="#requirements" class="nav-link" data-section="requirements">
                        <span class="nav-icon">üì¶</span>requirements.txt
                    </a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3 class="nav-title">Deploy</h3>
                <ul class="nav-list">
                    <li><a href="#deploy-flyio" class="nav-link" data-section="deploy-flyio">
                        <span class="nav-icon">üöÄ</span>Deploy na Fly.io
                    </a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <header class="page-header">
            <button class="menu-btn" id="menuBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="header-info">
                <span class="version-badge">v1.0</span>
                <span class="header-divider">|</span>
                <span class="header-text">Documenta√ß√£o T√©cnica</span>
            </div>
        </header>

        <div class="content-wrapper">
            <!-- Overview Section -->
            <section id="overview" class="doc-section active">
                <div class="section-header">
                    <h1>Search Products API</h1>
                    <p class="section-subtitle">Sistema de busca inteligente de produtos</p>
                </div>

                <div class="card highlight-card">
                    <h2>üìö Vis√£o Geral</h2>
                    <p>Este projeto √© uma <strong>API de busca de produtos</strong> constru√≠da com FastAPI. Ela permite realizar buscas inteligentes em um cat√°logo de produtos usando m√∫ltiplas estrat√©gias.</p>
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">üîç</span>
                        <h3>Busca H√≠brida</h3>
                        <p>Combina busca vetorial (embeddings OpenAI), full-text, trigram e keyword</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üé®</span>
                        <h3>Estimador de Tinta</h3>
                        <p>Calcula quantidade de latas necess√°rias para pintura</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üöö</span>
                        <h3>Integra√ß√£o VTEX</h3>
                        <p>Simula√ß√£o de frete e consulta de SKUs</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üì•</span>
                        <h3>Ingest√£o de Dados</h3>
                        <p>Importa√ß√£o via CSV ou API externa (Cubo)</p>
                    </div>
                </div>

                <div class="card">
                    <h2>üèóÔ∏è Arquitetura do Sistema</h2>
                    <div class="architecture-diagram">
                        <pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    <span class="hl-blue">FastAPI (api.py)</span>                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  POST /search          ‚îÇ Busca h√≠brida de produtos          ‚îÇ
‚îÇ  POST /paint/estimate  ‚îÇ C√°lculo de tinta                   ‚îÇ
‚îÇ  GET  /vtex/sku/{sku}  ‚îÇ Consulta SKU na VTEX               ‚îÇ
‚îÇ  POST /shipping/*      ‚îÇ Simula√ß√£o de frete                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ                              ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ<span class="hl-green">search_products.py</span>‚îÇ          ‚îÇ <span class="hl-purple">paint_estimator.py</span>‚îÇ
    ‚îÇ                 ‚îÇ          ‚îÇ                   ‚îÇ
    ‚îÇ - Busca vetorial ‚îÇ          ‚îÇ - C√°lculo √°rea    ‚îÇ
    ‚îÇ - Full-text     ‚îÇ          ‚îÇ - Composi√ß√£o latas‚îÇ
    ‚îÇ - Trigram       ‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ - Keyword       ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   <span class="hl-orange">PostgreSQL</span>    ‚îÇ
    ‚îÇ  (pgvector/rag) ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  <span class="hl-cyan">Ingest√£o CSV</span>   ‚îÇ ‚óÑ‚îÄ‚îÄ ingest_csv.py
    ‚îÇ  <span class="hl-cyan">Ingest√£o API</span>   ‚îÇ ‚óÑ‚îÄ‚îÄ ingest_api.py
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
                    </div>
                </div>

                <div class="card">
                    <h2>‚ö° Como Iniciar</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># 1. Instalar depend√™ncias</span>
pip install -r requirements.txt

<span class="comment"># 2. Configurar .env</span>
cp .env.example .env
<span class="comment"># Editar com suas credenciais</span>

<span class="comment"># 3. Iniciar a API</span>
uvicorn api:app --host 0.0.0.0 --port 8000</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>üîê Vari√°veis de Ambiente</h2>
                    <div class="env-table">
                        <div class="env-group">
                            <h4>Banco de Dados</h4>
                            <div class="env-item"><code>DB_HOST</code><span>Host do PostgreSQL</span></div>
                            <div class="env-item"><code>DB_PORT</code><span>Porta (padr√£o: 5432)</span></div>
                            <div class="env-item"><code>DB_USER</code><span>Usu√°rio</span></div>
                            <div class="env-item"><code>DB_PASSWORD</code><span>Senha</span></div>
                            <div class="env-item"><code>DB_NAME</code><span>Nome do banco</span></div>
                        </div>
                        <div class="env-group">
                            <h4>OpenAI</h4>
                            <div class="env-item"><code>OPENAI_API_KEY</code><span>Chave de API</span></div>
                            <div class="env-item"><code>EMB_MODEL</code><span>Modelo de embedding</span></div>
                            <div class="env-item"><code>EMB_DIM</code><span>Dimens√£o (padr√£o: 1536)</span></div>
                        </div>
                        <div class="env-group">
                            <h4>VTEX</h4>
                            <div class="env-item"><code>VTEX_APP_KEY</code><span>Chave da aplica√ß√£o</span></div>
                            <div class="env-item"><code>VTEX_APP_TOKEN</code><span>Token da aplica√ß√£o</span></div>
                            <div class="env-item"><code>VTEX_ACCOUNT_HOST</code><span>Host da conta</span></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Endpoints Section -->
            <section id="endpoints" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">API Reference</span>
                    <h1>Endpoints da API</h1>
                    <p class="section-subtitle">Documenta√ß√£o completa de todos os endpoints dispon√≠veis</p>
                </div>

                <div class="card highlight-card">
                    <h2>üîå Base URL</h2>
                    <p>Todos os endpoints est√£o dispon√≠veis a partir da URL base da API:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">url</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Local</span>
http://localhost:8000

<span class="comment"># Produ√ß√£o (Fly.io)</span>
https://search-products-api.fly.dev</code></pre>
                    </div>
                    <p class="info-text">üìñ Documenta√ß√£o interativa (Swagger): <code>/docs</code></p>
                    <p class="info-text">üìÑ OpenAPI Schema: <code>/openapi.json</code></p>
                </div>

                <!-- POST /search -->
                <div class="card" id="endpoint-search">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <code>/search</code>
                    </div>
                    <h2>Busca de Produtos</h2>
                    <p>Realiza busca h√≠brida no cat√°logo de produtos usando m√∫ltiplas estrat√©gias: vetorial (embeddings), full-text, trigram e keyword.</p>
                    
                    <div class="endpoint-details">
                        <h4>üì• Request Body</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Obrigat√≥rio</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>query</code></td>
                                    <td>string</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>Termo de busca (nome, SKU, c√≥digo de barras)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="endpoint-io">
                            <div class="io-block">
                                <h5>Exemplo de Request</h5>
                                <pre><code>{
  "query": "cimento 50kg"
}</code></pre>
                            </div>
                            <div class="io-block">
                                <h5>Exemplo de Response</h5>
                                <pre><code>{
  "method": "hybrid",
  "confidence": 0.85,
  "results": [
    {
      "sku": "12345",
      "name": "Cimento CP-II 50kg",
      "codigo_barras": "7891234567890",
      "score": 0.85
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <h4>üì§ Response Fields</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>method</code></td>
                                    <td>string</td>
                                    <td>M√©todo de busca utilizado (hybrid, deterministic, etc.)</td>
                                </tr>
                                <tr>
                                    <td><code>confidence</code></td>
                                    <td>float</td>
                                    <td>N√≠vel de confian√ßa da busca (0.0 a 1.0)</td>
                                </tr>
                                <tr>
                                    <td><code>results</code></td>
                                    <td>array</td>
                                    <td>Lista de produtos encontrados</td>
                                </tr>
                                <tr>
                                    <td><code>results[].sku</code></td>
                                    <td>string</td>
                                    <td>C√≥digo SKU do produto</td>
                                </tr>
                                <tr>
                                    <td><code>results[].name</code></td>
                                    <td>string</td>
                                    <td>Nome do produto</td>
                                </tr>
                                <tr>
                                    <td><code>results[].score</code></td>
                                    <td>float</td>
                                    <td>Score de relev√¢ncia do resultado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="curl-tabs">
                        <div class="curl-tab-buttons">
                            <button class="curl-tab-btn active" onclick="switchCurlTab(this, 'local')">üñ•Ô∏è Local</button>
                            <button class="curl-tab-btn" onclick="switchCurlTab(this, 'prod')">üöÄ Produ√ß√£o</button>
                        </div>
                        <div class="curl-tab-content active" data-env="local">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "http://localhost:8000/search" \
  -H "Content-Type: application/json" \
  -d '{"query": "cimento 50kg"}'</code></pre>
                            </div>
                        </div>
                        <div class="curl-tab-content" data-env="prod">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "https://search-products-api.fly.dev/search" \
  -H "Content-Type: application/json" \
  -d '{"query": "cimento 50kg"}'</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- POST /paint/estimate -->
                <div class="card" id="endpoint-paint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <code>/paint/estimate</code>
                    </div>
                    <h2>Estimador de Tinta</h2>
                    <p>Calcula a quantidade de tinta necess√°ria para pintar uma √°rea e determina a melhor combina√ß√£o de latas para comprar.</p>
                    
                    <div class="endpoint-details">
                        <h4>üì• Request Body</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Obrigat√≥rio</th>
                                    <th>Padr√£o</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>total_area_m2</code></td>
                                    <td>float</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>-</td>
                                    <td>√Årea total a ser pintada em m¬≤</td>
                                </tr>
                                <tr>
                                    <td><code>coverage_m2_per_liter</code></td>
                                    <td>float</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>-</td>
                                    <td>Rendimento da tinta (m¬≤ por litro por dem√£o)</td>
                                </tr>
                                <tr>
                                    <td><code>coats</code></td>
                                    <td>int</td>
                                    <td><span class="badge optional">‚óã</span></td>
                                    <td>1</td>
                                    <td>N√∫mero de dem√£os</td>
                                </tr>
                                <tr>
                                    <td><code>exclude_area_m2</code></td>
                                    <td>float</td>
                                    <td><span class="badge optional">‚óã</span></td>
                                    <td>0.0</td>
                                    <td>√Årea de portas/janelas a descontar</td>
                                </tr>
                                <tr>
                                    <td><code>can_sizes_liters</code></td>
                                    <td>array[float]</td>
                                    <td><span class="badge optional">‚óã</span></td>
                                    <td>[18.0, 3.6, 2.5, 0.9, 0.5]</td>
                                    <td>Tamanhos de latas dispon√≠veis (litros)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="endpoint-io">
                            <div class="io-block">
                                <h5>Exemplo de Request</h5>
                                <pre><code>{
  "total_area_m2": 100,
  "coverage_m2_per_liter": 10,
  "coats": 2,
  "exclude_area_m2": 5,
  "can_sizes_liters": [18.0, 3.6, 0.9]
}</code></pre>
                            </div>
                            <div class="io-block">
                                <h5>Exemplo de Response</h5>
                                <pre><code>{
  "paintable_area_m2": 95,
  "liters_needed": 19,
  "cans": {"18.0": 1, "3.6": 1},
  "total_cans": 2,
  "waste_liters": 2.6
}</code></pre>
                            </div>
                        </div>

                        <h4>üì§ Response Fields</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>paintable_area_m2</code></td>
                                    <td>float</td>
                                    <td>√Årea efetiva a ser pintada (ap√≥s descontos)</td>
                                </tr>
                                <tr>
                                    <td><code>liters_needed</code></td>
                                    <td>float</td>
                                    <td>Quantidade de litros necess√°rios</td>
                                </tr>
                                <tr>
                                    <td><code>cans</code></td>
                                    <td>object</td>
                                    <td>Composi√ß√£o de latas (tamanho: quantidade)</td>
                                </tr>
                                <tr>
                                    <td><code>total_cans</code></td>
                                    <td>int</td>
                                    <td>N√∫mero total de latas</td>
                                </tr>
                                <tr>
                                    <td><code>waste_liters</code></td>
                                    <td>float</td>
                                    <td>Litros de sobra/desperd√≠cio</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="curl-tabs">
                        <div class="curl-tab-buttons">
                            <button class="curl-tab-btn active" onclick="switchCurlTab(this, 'local')">üñ•Ô∏è Local</button>
                            <button class="curl-tab-btn" onclick="switchCurlTab(this, 'prod')">üöÄ Produ√ß√£o</button>
                        </div>
                        <div class="curl-tab-content active" data-env="local">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "http://localhost:8000/paint/estimate" \
  -H "Content-Type: application/json" \
  -d '{
    "total_area_m2": 100,
    "coverage_m2_per_liter": 10,
    "coats": 2,
    "exclude_area_m2": 5
  }'</code></pre>
                            </div>
                        </div>
                        <div class="curl-tab-content" data-env="prod">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "https://search-products-api.fly.dev/paint/estimate" \
  -H "Content-Type: application/json" \
  -d '{
    "total_area_m2": 100,
    "coverage_m2_per_liter": 10,
    "coats": 2,
    "exclude_area_m2": 5
  }'</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- GET /vtex/sku/{sku}/productId -->
                <div class="card" id="endpoint-vtex-sku">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <code>/vtex/sku/{sku}/productId</code>
                    </div>
                    <h2>Consulta ProductId VTEX</h2>
                    <p>Obt√©m o <code>ProductId</code> da plataforma VTEX a partir de um SKU (RefId). √ötil para integra√ß√µes com o e-commerce.</p>
                    
                    <div class="endpoint-details">
                        <h4>üì• Path Parameters</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Par√¢metro</th>
                                    <th>Tipo</th>
                                    <th>Obrigat√≥rio</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>sku</code></td>
                                    <td>string</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>C√≥digo SKU do produto</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="endpoint-io">
                            <div class="io-block">
                                <h5>Request</h5>
                                <pre><code>GET /vtex/sku/33375/productId</code></pre>
                            </div>
                            <div class="io-block">
                                <h5>Response (Encontrado)</h5>
                                <pre><code>{
  "sku": "33375",
  "found": true,
  "productId": 12345
}</code></pre>
                            </div>
                        </div>

                        <h4>üì§ Response Fields</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>sku</code></td>
                                    <td>string</td>
                                    <td>SKU consultado</td>
                                </tr>
                                <tr>
                                    <td><code>found</code></td>
                                    <td>boolean</td>
                                    <td>Se o SKU foi encontrado na VTEX</td>
                                </tr>
                                <tr>
                                    <td><code>productId</code></td>
                                    <td>int | null</td>
                                    <td>ID do produto na VTEX (apenas se found=true)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="curl-tabs">
                        <div class="curl-tab-buttons">
                            <button class="curl-tab-btn active" onclick="switchCurlTab(this, 'local')">üñ•Ô∏è Local</button>
                            <button class="curl-tab-btn" onclick="switchCurlTab(this, 'prod')">üöÄ Produ√ß√£o</button>
                        </div>
                        <div class="curl-tab-content active" data-env="local">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X GET "http://localhost:8000/vtex/sku/33375/productId"</code></pre>
                            </div>
                        </div>
                        <div class="curl-tab-content" data-env="prod">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X GET "https://search-products-api.fly.dev/vtex/sku/33375/productId"</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- POST /shipping/simulate -->
                <div class="card" id="endpoint-shipping">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <code>/shipping/simulate</code>
                    </div>
                    <h2>Simula√ß√£o de Frete</h2>
                    <p>Simula op√ß√µes de frete na VTEX para uma lista de SKUs. Converte automaticamente SKUs em ProductIds e retorna todas as op√ß√µes de entrega dispon√≠veis.</p>
                    
                    <div class="endpoint-details">
                        <h4>üì• Request Body</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Obrigat√≥rio</th>
                                    <th>Padr√£o</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>items</code></td>
                                    <td>array</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>-</td>
                                    <td>Lista de itens para simular</td>
                                </tr>
                                <tr>
                                    <td><code>items[].sku</code></td>
                                    <td>string</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>-</td>
                                    <td>C√≥digo SKU do produto</td>
                                </tr>
                                <tr>
                                    <td><code>items[].quantity</code></td>
                                    <td>int</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>-</td>
                                    <td>Quantidade do item</td>
                                </tr>
                                <tr>
                                    <td><code>items[].seller</code></td>
                                    <td>string</td>
                                    <td><span class="badge optional">‚óã</span></td>
                                    <td>"1"</td>
                                    <td>ID do seller</td>
                                </tr>
                                <tr>
                                    <td><code>postalCode</code></td>
                                    <td>string</td>
                                    <td><span class="badge required">‚úì</span></td>
                                    <td>-</td>
                                    <td>CEP de destino (apenas n√∫meros)</td>
                                </tr>
                                <tr>
                                    <td><code>country</code></td>
                                    <td>string</td>
                                    <td><span class="badge optional">‚óã</span></td>
                                    <td>"BRA"</td>
                                    <td>C√≥digo do pa√≠s (ISO 3166-1 alpha-3)</td>
                                </tr>
                                <tr>
                                    <td><code>sc</code></td>
                                    <td>string</td>
                                    <td><span class="badge optional">‚óã</span></td>
                                    <td>"1"</td>
                                    <td>Sales Channel (canal de vendas)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="endpoint-io">
                            <div class="io-block">
                                <h5>Exemplo de Request</h5>
                                <pre><code>{
  "items": [
    {"sku": "33375", "quantity": 2},
    {"sku": "12345", "quantity": 1}
  ],
  "postalCode": "01310100",
  "country": "BRA"
}</code></pre>
                            </div>
                            <div class="io-block">
                                <h5>Exemplo de Response</h5>
                                <pre><code>{
  "ok": true,
  "notFoundSkus": [],
  "request": {...},
  "logisticsInfo": [...],
  "slas": [
    {
      "itemIndex": 0,
      "slas": [
        {"id": "Normal", "price": 1500},
        {"id": "Expresso", "price": 2500}
      ]
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <h4>üì§ Response Fields</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>ok</code></td>
                                    <td>boolean</td>
                                    <td>Se a simula√ß√£o foi bem sucedida</td>
                                </tr>
                                <tr>
                                    <td><code>notFoundSkus</code></td>
                                    <td>array[string]</td>
                                    <td>SKUs que n√£o foram encontrados na VTEX</td>
                                </tr>
                                <tr>
                                    <td><code>request</code></td>
                                    <td>object</td>
                                    <td>Payload enviado para a VTEX</td>
                                </tr>
                                <tr>
                                    <td><code>logisticsInfo</code></td>
                                    <td>array</td>
                                    <td>Informa√ß√µes completas de log√≠stica (raw VTEX)</td>
                                </tr>
                                <tr>
                                    <td><code>slas</code></td>
                                    <td>array</td>
                                    <td>SLAs simplificados por item</td>
                                </tr>
                                <tr>
                                    <td><code>message</code></td>
                                    <td>string</td>
                                    <td>Mensagem de erro (apenas se ok=false)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="curl-tabs">
                        <div class="curl-tab-buttons">
                            <button class="curl-tab-btn active" onclick="switchCurlTab(this, 'local')">üñ•Ô∏è Local</button>
                            <button class="curl-tab-btn" onclick="switchCurlTab(this, 'prod')">üöÄ Produ√ß√£o</button>
                        </div>
                        <div class="curl-tab-content active" data-env="local">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "http://localhost:8000/shipping/simulate" \
  -H "Content-Type: application/json" \
  -d '{
    "items": [{"sku": "33375", "quantity": 2}],
    "postalCode": "01310100",
    "country": "BRA"
  }'</code></pre>
                            </div>
                        </div>
                        <div class="curl-tab-content" data-env="prod">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "https://search-products-api.fly.dev/shipping/simulate" \
  -H "Content-Type: application/json" \
  -d '{
    "items": [{"sku": "33375", "quantity": 2}],
    "postalCode": "01310100",
    "country": "BRA"
  }'</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- POST /shipping/simulate/slas -->
                <div class="card" id="endpoint-shipping-slas">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <code>/shipping/simulate/slas</code>
                    </div>
                    <h2>Simula√ß√£o de Frete (Simplificada)</h2>
                    <p>Vers√£o simplificada da simula√ß√£o de frete que retorna apenas uma lista flat de SLAs com <code>id</code> e <code>price</code>. Ideal para integra√ß√µes que precisam apenas das op√ß√µes de frete dispon√≠veis.</p>
                    
                    <div class="endpoint-details">
                        <h4>üì• Request Body</h4>
                        <p class="info-text">Mesmos par√¢metros de <code>/shipping/simulate</code></p>

                        <div class="endpoint-io">
                            <div class="io-block">
                                <h5>Exemplo de Request</h5>
                                <pre><code>{
  "items": [
    {"sku": "33375", "quantity": 2}
  ],
  "postalCode": "01310100",
  "country": "BRA"
}</code></pre>
                            </div>
                            <div class="io-block">
                                <h5>Exemplo de Response</h5>
                                <pre><code>[
  {"id": "Normal", "price": 1500},
  {"id": "Expresso", "price": 2500},
  {"id": "Agendada", "price": 1200}
]</code></pre>
                            </div>
                        </div>

                        <h4>üì§ Response</h4>
                        <p>Array de objetos com <code>id</code> (nome do SLA) e <code>price</code> (pre√ßo em centavos).</p>
                        
                        <div class="formula-box">
                            <p><strong>Nota:</strong> O campo <code>price</code> √© retornado em <strong>centavos</strong>.</p>
                            <p>Exemplo: <code>1500</code> = R$ 15,00</p>
                        </div>
                    </div>

                    <div class="curl-tabs">
                        <div class="curl-tab-buttons">
                            <button class="curl-tab-btn active" onclick="switchCurlTab(this, 'local')">üñ•Ô∏è Local</button>
                            <button class="curl-tab-btn" onclick="switchCurlTab(this, 'prod')">üöÄ Produ√ß√£o</button>
                        </div>
                        <div class="curl-tab-content active" data-env="local">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "http://localhost:8000/shipping/simulate/slas" \
  -H "Content-Type: application/json" \
  -d '{
    "items": [{"sku": "33375", "quantity": 2}],
    "postalCode": "01310100"
  }'</code></pre>
                            </div>
                        </div>
                        <div class="curl-tab-content" data-env="prod">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">curl</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                                </div>
                                <pre><code>curl -X POST "https://search-products-api.fly.dev/shipping/simulate/slas" \
  -H "Content-Type: application/json" \
  -d '{
    "items": [{"sku": "33375", "quantity": 2}],
    "postalCode": "01310100"
  }'</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Reference -->
                <div class="card">
                    <h2>üìã Refer√™ncia R√°pida</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>M√©todo</th>
                                <th>Endpoint</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="method post small">POST</span></td>
                                <td><code>/search</code></td>
                                <td>Busca h√≠brida de produtos</td>
                            </tr>
                            <tr>
                                <td><span class="method post small">POST</span></td>
                                <td><code>/paint/estimate</code></td>
                                <td>C√°lculo de quantidade de tinta</td>
                            </tr>
                            <tr>
                                <td><span class="method get small">GET</span></td>
                                <td><code>/vtex/sku/{sku}/productId</code></td>
                                <td>Consulta ProductId na VTEX</td>
                            </tr>
                            <tr>
                                <td><span class="method post small">POST</span></td>
                                <td><code>/shipping/simulate</code></td>
                                <td>Simula√ß√£o completa de frete</td>
                            </tr>
                            <tr>
                                <td><span class="method post small">POST</span></td>
                                <td><code>/shipping/simulate/slas</code></td>
                                <td>Simula√ß√£o de frete (apenas SLAs)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Error Handling -->
                <div class="card">
                    <h2>‚ö†Ô∏è Tratamento de Erros</h2>
                    <p>A API retorna erros no formato padr√£o do FastAPI:</p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">json</span>
                        </div>
                        <pre><code>{
  "detail": "Mensagem de erro descritiva"
}</code></pre>
                    </div>

                    <h4>C√≥digos HTTP Comuns</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>C√≥digo</th>
                                <th>Status</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>200</code></td>
                                <td><span class="badge success">OK</span></td>
                                <td>Requisi√ß√£o bem sucedida</td>
                            </tr>
                            <tr>
                                <td><code>400</code></td>
                                <td><span class="badge warning">Bad Request</span></td>
                                <td>Par√¢metros inv√°lidos ou faltando</td>
                            </tr>
                            <tr>
                                <td><code>404</code></td>
                                <td><span class="badge warning">Not Found</span></td>
                                <td>Recurso n√£o encontrado</td>
                            </tr>
                            <tr>
                                <td><code>422</code></td>
                                <td><span class="badge warning">Validation Error</span></td>
                                <td>Erro de valida√ß√£o dos dados</td>
                            </tr>
                            <tr>
                                <td><code>500</code></td>
                                <td><span class="badge error">Server Error</span></td>
                                <td>Erro interno do servidor</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- API Section -->
            <section id="api" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">api.py</span>
                    <h1>Servidor FastAPI</h1>
                    <p class="section-subtitle">Arquivo principal da aplica√ß√£o com todos os endpoints</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Este √© o <strong>arquivo principal</strong> da aplica√ß√£o. Ele cria o servidor FastAPI e define todos os endpoints dispon√≠veis para uso externo.</p>
                </div>

                <div class="endpoints-list">
                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/search</code>
                        </div>
                        <p>Busca produtos no cat√°logo</p>
                        <div class="endpoint-details">
                            <div class="endpoint-io">
                                <div class="io-block">
                                    <h5>Entrada</h5>
                                    <pre><code>{
  "query": "cimento 50kg"
}</code></pre>
                                </div>
                                <div class="io-block">
                                    <h5>Sa√≠da</h5>
                                    <pre><code>{
  "method": "hybrid",
  "confidence": 0.85,
  "results": [
    {
      "sku": "12345",
      "name": "Cimento CP-II 50kg",
      "score": 0.85
    }
  ]
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/paint/estimate</code>
                        </div>
                        <p>Calcula quantidade de tinta necess√°ria</p>
                        <div class="endpoint-details">
                            <div class="endpoint-io">
                                <div class="io-block">
                                    <h5>Entrada</h5>
                                    <pre><code>{
  "total_area_m2": 100,
  "coverage_m2_per_liter": 10,
  "coats": 2,
  "exclude_area_m2": 5
}</code></pre>
                                </div>
                                <div class="io-block">
                                    <h5>Sa√≠da</h5>
                                    <pre><code>{
  "paintable_area_m2": 95,
  "liters_needed": 19,
  "cans": {"18.0": 1, "3.6": 1},
  "total_cans": 2,
  "waste_liters": 2.6
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/vtex/sku/{sku}/productId</code>
                        </div>
                        <p>Obt√©m o ProductId da VTEX a partir de um SKU</p>
                        <div class="endpoint-details">
                            <div class="endpoint-io">
                                <div class="io-block full">
                                    <h5>Exemplo</h5>
                                    <pre><code>GET /vtex/sku/33375/productId

‚Üí {"sku": "33375", "found": true, "productId": 12345}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/shipping/simulate</code>
                        </div>
                        <p>Simula frete na VTEX para uma lista de SKUs</p>
                    </div>

                    <div class="endpoint-card">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/shipping/simulate/slas</code>
                        </div>
                        <p>Retorna apenas {id, price} dos SLAs de frete</p>
                    </div>
                </div>

                <div class="card">
                    <h2>‚ñ∂Ô∏è Como Executar</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Diretamente</span>
python api.py

<span class="comment"># Ou com uvicorn (recomendado)</span>
uvicorn api:app --host 0.0.0.0 --port 8000 --reload</code></pre>
                    </div>
                    <p class="info-text">üìç API dispon√≠vel em <code>http://localhost:8000</code></p>
                    <p class="info-text">üìñ Documenta√ß√£o autom√°tica: <code>http://localhost:8000/docs</code></p>
                </div>
            </section>

            <!-- Search Products Section -->
            <section id="search" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">search_products.py</span>
                    <h1>Busca H√≠brida de Produtos</h1>
                    <p class="section-subtitle">L√≥gica principal de busca combinando m√∫ltiplas estrat√©gias</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Este arquivo cont√©m a <strong>l√≥gica principal de busca</strong> de produtos. Implementa uma busca "h√≠brida" que combina v√°rias estrat√©gias para encontrar os produtos mais relevantes.</p>
                </div>

                <div class="card">
                    <h2>üîç Estrat√©gias de Busca</h2>
                    <div class="strategy-grid">
                        <div class="strategy-card">
                            <div class="strategy-number">1</div>
                            <h4>Determin√≠stica (SKU/EAN)</h4>
                            <p>Se a query for exatamente um SKU ou c√≥digo de barras, retorna o produto diretamente.</p>
                            <span class="strategy-example">Ex: "123456" ‚Üí Produto com SKU 123456</span>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-number">2</div>
                            <h4>Vetorial (Embeddings)</h4>
                            <p>Usa embeddings da OpenAI para encontrar produtos semanticamente similares.</p>
                            <span class="strategy-example">Bom para: significado, sin√¥nimos</span>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-number">3</div>
                            <h4>Full-Text</h4>
                            <p>Busca tradicional por palavras usando √≠ndices do PostgreSQL.</p>
                            <span class="strategy-example">Bom para: palavras exatas, varia√ß√µes</span>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-number">4</div>
                            <h4>Trigram (pg_trgm)</h4>
                            <p>Encontra textos similares mesmo com erros de digita√ß√£o.</p>
                            <span class="strategy-example">Bom para: typos, nomes parciais</span>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-number">5</div>
                            <h4>Keyword (ILIKE)</h4>
                            <p>Busca direta por palavras-chave no nome e descri√ß√£o.</p>
                            <span class="strategy-example">Bom para: "cimento", "tinta"</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>‚öñÔ∏è Fus√£o de Resultados</h2>
                    <p>Os resultados s√£o combinados usando pesos configur√°veis:</p>
                    <div class="weights-table">
                        <div class="weight-row">
                            <span class="weight-name">Vetorial</span>
                            <div class="weight-bar" style="--width: 50%"></div>
                            <span class="weight-value">50% (alpha)</span>
                        </div>
                        <div class="weight-row">
                            <span class="weight-name">Full-text</span>
                            <div class="weight-bar" style="--width: 30%"></div>
                            <span class="weight-value">30% (beta)</span>
                        </div>
                        <div class="weight-row">
                            <span class="weight-name">Trigram</span>
                            <div class="weight-bar" style="--width: 10%"></div>
                            <span class="weight-value">10% (gamma)</span>
                        </div>
                        <div class="weight-row">
                            <span class="weight-name">Keyword</span>
                            <div class="weight-bar" style="--width: 10%"></div>
                            <span class="weight-value">10% (delta)</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üíª Uso via CLI</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code>python search_products.py --q "cimento 50kg" --k 10</code></pre>
                    </div>
                </div>
            </section>

            <!-- Ingest CSV Section -->
            <section id="ingest-csv" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">ingest_csv.py</span>
                    <h1>Ingest√£o via CSV</h1>
                    <p class="section-subtitle">Pipeline de importa√ß√£o de produtos a partir de arquivo CSV</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Respons√°vel por <strong>importar produtos de um arquivo CSV</strong> para o banco de dados PostgreSQL. Processa cada linha, gera embeddings e insere no schema <code>rag</code>.</p>
                </div>

                <div class="card">
                    <h2>üîÑ Fluxo de Processamento</h2>
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <span class="flow-icon">üìÑ</span>
                            <span class="flow-label">CSV</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">üìñ</span>
                            <span class="flow-label">Leitura</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">üîß</span>
                            <span class="flow-label">Normaliza√ß√£o</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">‚úÇÔ∏è</span>
                            <span class="flow-label">Chunking</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">üß†</span>
                            <span class="flow-label">Embeddings</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">üóÑÔ∏è</span>
                            <span class="flow-label">PostgreSQL</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üìã Colunas Esperadas no CSV</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Coluna</th>
                                <th>Obrigat√≥ria</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>codigo_produto</code></td>
                                <td><span class="badge required">‚úì</span></td>
                                <td>SKU do produto</td>
                            </tr>
                            <tr>
                                <td><code>descricao</code></td>
                                <td><span class="badge required">‚úì</span></td>
                                <td>Nome do produto</td>
                            </tr>
                            <tr>
                                <td><code>descricao_tecnica</code></td>
                                <td><span class="badge optional">‚óã</span></td>
                                <td>Descri√ß√£o detalhada</td>
                            </tr>
                            <tr>
                                <td><code>codigo_barras</code></td>
                                <td><span class="badge optional">‚óã</span></td>
                                <td>EAN</td>
                            </tr>
                            <tr>
                                <td><code>tipo</code></td>
                                <td><span class="badge optional">‚óã</span></td>
                                <td>Categoria/tipo</td>
                            </tr>
                            <tr>
                                <td><code>estoque</code></td>
                                <td><span class="badge optional">‚óã</span></td>
                                <td>Quantidade em estoque</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>‚ñ∂Ô∏è Como Executar</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Editar constantes no arquivo e executar:</span>
python ingest_csv.py</code></pre>
                    </div>
                </div>
            </section>

            <!-- Ingest API Section -->
            <section id="ingest-api" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">ingest_api.py</span>
                    <h1>Ingest√£o via API</h1>
                    <p class="section-subtitle">Pipeline de importa√ß√£o de produtos da API do Cubo</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Importa produtos diretamente da <strong>API do Cubo</strong> para o banco de dados. √â uma alternativa ao <code>ingest_csv.py</code> que busca os dados de uma API externa.</p>
                </div>

                <div class="card">
                    <h2>‚öôÔ∏è Par√¢metros CLI</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Op√ß√£o</th>
                                <th>Padr√£o</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>--termo</code></td>
                                <td>"*"</td>
                                <td>Termo de busca na API</td>
                            </tr>
                            <tr>
                                <td><code>--page-size</code></td>
                                <td>50</td>
                                <td>Itens por p√°gina</td>
                            </tr>
                            <tr>
                                <td><code>--start-page</code></td>
                                <td>1</td>
                                <td>P√°gina inicial</td>
                            </tr>
                            <tr>
                                <td><code>--limit-pages</code></td>
                                <td>None</td>
                                <td>Limitar p√°ginas (para testes)</td>
                            </tr>
                            <tr>
                                <td><code>--dry-run</code></td>
                                <td>False</td>
                                <td>Apenas simula, n√£o grava</td>
                            </tr>
                            <tr>
                                <td><code>--verbose, -v</code></td>
                                <td>False</td>
                                <td>Mostra logs detalhados</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>üíª Exemplos de Uso</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Ingerir tudo</span>
python ingest_api.py --verbose

<span class="comment"># Testar com 5 p√°ginas</span>
python ingest_api.py --limit-pages 5 --verbose

<span class="comment"># Simula√ß√£o sem gravar</span>
python ingest_api.py --dry-run --limit-pages 10

<span class="comment"># Continuar a partir da p√°gina 100</span>
python ingest_api.py --start-page 100</code></pre>
                    </div>
                </div>
            </section>

            <!-- Paint Estimator Section -->
            <section id="paint" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">paint_estimator.py</span>
                    <h1>Estimador de Tinta</h1>
                    <p class="section-subtitle">C√°lculo de quantidade de tinta e composi√ß√£o de latas</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Calcula a <strong>quantidade de tinta necess√°ria</strong> para pintar uma √°rea e determina a <strong>melhor combina√ß√£o de latas</strong> para comprar.</p>
                </div>

                <div class="card">
                    <h2>üìê F√≥rmula de C√°lculo</h2>
                    <div class="formula-box">
                        <p><strong>√Årea Pint√°vel</strong> = √Årea Total ‚àí √Årea Exclu√≠da</p>
                        <p><strong>Litros Necess√°rios</strong> = (√Årea Pint√°vel √ó Dem√£os) √∑ Rendimento</p>
                    </div>
                </div>

                <div class="card">
                    <h2>ü™£ Tamanhos de Lata Padr√£o</h2>
                    <div class="cans-grid">
                        <div class="can-item">
                            <div class="can-size">18.0 L</div>
                            <div class="can-desc">Gal√£o grande</div>
                        </div>
                        <div class="can-item">
                            <div class="can-size">3.6 L</div>
                            <div class="can-desc">Gal√£o m√©dio</div>
                        </div>
                        <div class="can-item">
                            <div class="can-size">2.5 L</div>
                            <div class="can-desc">Intermedi√°ria</div>
                        </div>
                        <div class="can-item">
                            <div class="can-size">0.9 L</div>
                            <div class="can-desc">Lata pequena</div>
                        </div>
                        <div class="can-item">
                            <div class="can-size">0.5 L</div>
                            <div class="can-desc">Amostra/teste</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üíª Exemplo de Uso</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">python</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="keyword">from</span> paint_estimator <span class="keyword">import</span> estimate_paint

result = estimate_paint(
    total_area_m2=<span class="number">100</span>,      <span class="comment"># 100m¬≤ de parede</span>
    coverage_m2_per_liter=<span class="number">10</span>,  <span class="comment"># Tinta rende 10m¬≤/L</span>
    coats=<span class="number">2</span>,                <span class="comment"># 2 dem√£os</span>
    exclude_area_m2=<span class="number">8</span>,      <span class="comment"># 8m¬≤ de portas/janelas</span>
)

<span class="comment"># Resultado:</span>
<span class="comment"># {</span>
<span class="comment">#   "paintable_area_m2": 92,</span>
<span class="comment">#   "liters_needed": 18.4,</span>
<span class="comment">#   "cans": {"18.0": 1, "0.9": 1},</span>
<span class="comment">#   "waste_liters": 0.5</span>
<span class="comment"># }</span></code></pre>
                    </div>
                </div>
            </section>

            <!-- VTEX Shipping Section -->
            <section id="vtex-shipping" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">vtex_shipping.py</span>
                    <h1>Integra√ß√£o VTEX - Frete</h1>
                    <p class="section-subtitle">Simula√ß√£o de frete e consulta de SKUs na VTEX</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Integra com a <strong>plataforma VTEX</strong> para simular frete e consultar informa√ß√µes de SKU. √â usado pela API para oferecer funcionalidades de e-commerce.</p>
                </div>

                <div class="card">
                    <h2>üîß Fun√ß√µes Principais</h2>
                    <div class="functions-list">
                        <div class="function-item">
                            <h4><code>get_product_id_by_sku(ref_id)</code></h4>
                            <p>Consulta a VTEX e retorna o ProductId a partir de um SKU.</p>
                        </div>
                        <div class="function-item">
                            <h4><code>simulate_shipping_for_skus(items, postal_code, ...)</code></h4>
                            <p>Simula frete para uma lista de SKUs.</p>
                        </div>
                        <div class="function-item">
                            <h4><code>extract_slas_id_price(logistics_info)</code></h4>
                            <p>Extrai apenas {id, price} dos SLAs retornados.</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üåê Endpoints VTEX Utilizados</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Endpoint</th>
                                <th>M√©todo</th>
                                <th>Uso</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>/api/catalog/pvt/stockkeepingunit</code></td>
                                <td><span class="method get small">GET</span></td>
                                <td>Buscar SKU por RefId</td>
                            </tr>
                            <tr>
                                <td><code>/api/checkout/pub/orderForms/simulation</code></td>
                                <td><span class="method post small">POST</span></td>
                                <td>Simular frete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- VTEX Client Section -->
            <section id="vtex-client" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">vtex_client.py</span>
                    <h1>Cliente VTEX Simples</h1>
                    <p class="section-subtitle">Consulta b√°sica de SKU via CLI ou biblioteca</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Cliente VTEX <strong>simples</strong> para consultar informa√ß√µes de SKU via linha de comando ou como biblioteca. √â uma vers√£o mais b√°sica do <code>vtex_shipping.py</code>.</p>
                </div>

                <div class="card">
                    <h2>üíª Uso via CLI</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Consultar um SKU</span>
python vtex_client.py 33375

<span class="comment"># Sa√≠da: JSON com dados completos do SKU</span></code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>üìä C√≥digos de Sa√≠da</h2>
                    <table class="data-table compact">
                        <thead>
                            <tr>
                                <th>C√≥digo</th>
                                <th>Significado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>0</code></td>
                                <td>Sucesso</td>
                            </tr>
                            <tr>
                                <td><code>1</code></td>
                                <td>Par√¢metro faltando</td>
                            </tr>
                            <tr>
                                <td><code>2</code></td>
                                <td>Erro na requisi√ß√£o</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Fetch Cubo Section -->
            <section id="fetch-cubo" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">fetch_cubo_produtos.py</span>
                    <h1>Consulta API Cubo</h1>
                    <p class="section-subtitle">Verificar totais de produtos na API externa</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Consulta a <strong>API do Cubo</strong> e retorna informa√ß√µes sobre o total de produtos dispon√≠veis. √ötil para verificar quantos produtos existem antes de fazer uma ingest√£o completa.</p>
                </div>

                <div class="card">
                    <h2>üíª Uso via CLI</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Buscar totais de todos os produtos</span>
python fetch_cubo_produtos.py

<span class="comment"># Buscar totais com termo espec√≠fico</span>
python fetch_cubo_produtos.py "cimento"

<span class="comment"># Sa√≠da:</span>
{"total": 76720, "totalPages": 1535}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Head CSV Section -->
            <section id="head-csv" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">head_csv.py</span>
                    <h1>Extrair Primeiras Linhas do CSV</h1>
                    <p class="section-subtitle">Criar amostras de teste a partir de CSVs grandes</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p>Extrai as <strong>primeiras N linhas</strong> de um arquivo CSV grande e salva em um novo arquivo menor. √ötil para criar amostras de teste.</p>
                </div>

                <div class="card">
                    <h2>‚öôÔ∏è Configura√ß√£o</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">python</span>
                        </div>
                        <pre><code>INPUT_FILE = <span class="string">"./documents/produtos-cubo.csv"</span>
COUNT = <span class="number">200</span>  <span class="comment"># Quantidade de linhas</span>
OUTPUT_FILE = <span class="string">"resumido_200.csv"</span>
DELIMITER = <span class="string">";"</span>
INCLUDE_HEADER = <span class="keyword">True</span></code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>‚ú® Vantagens sobre <code>head</code> do terminal</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Aspecto</th>
                                <th>head_csv.py</th>
                                <th>head -n 200</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Campos com quebra de linha</td>
                                <td><span class="badge success">‚úì Trata</span></td>
                                <td><span class="badge error">‚úó Pode cortar</span></td>
                            </tr>
                            <tr>
                                <td>Encoding</td>
                                <td><span class="badge success">Configur√°vel</span></td>
                                <td><span class="badge warning">Depende</span></td>
                            </tr>
                            <tr>
                                <td>Delimitador</td>
                                <td><span class="badge success">Configur√°vel</span></td>
                                <td><span class="badge error">N/A</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Count CSV Section -->
            <section id="count-csv" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">count_csv_rows.py</span>
                    <h1>Contar Registros CSV</h1>
                    <p class="section-subtitle">Validar integridade de arquivos CSV</p>
                </div>

                <div class="card">
                    <h2>üìå O que faz?</h2>
                    <p><strong>Conta o n√∫mero de registros</strong> em um arquivo CSV, respeitando corretamente campos com quebras de linha e aspas.</p>
                </div>

                <div class="card">
                    <h2>üíª Uso via CLI</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code>python count_csv_rows.py

<span class="comment"># Sa√≠da:</span>
Arquivo: ./documents/produtos-cubo.csv
Cabe√ßalho: 1
Registros (dados): 76720
Total de linhas (arquivo): 76721</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>üÜö Por que n√£o usar <code>wc -l</code>?</h2>
                    <div class="comparison-box">
                        <div class="comparison-item">
                            <code>wc -l</code>
                            <span class="comparison-desc">Conta cada <code>\n</code> como linha</span>
                            <span class="badge error">‚ùå Impreciso</span>
                        </div>
                        <div class="comparison-item">
                            <code>count_csv_rows.py</code>
                            <span class="comparison-desc">Conta registros l√≥gicos</span>
                            <span class="badge success">‚úì Preciso</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Debug Section -->
            <section id="debug" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">debug scripts</span>
                    <h1>Scripts de Debug</h1>
                    <p class="section-subtitle">Ferramentas para diagn√≥stico e investiga√ß√£o</p>
                </div>

                <div class="card">
                    <h2>üîß Scripts Dispon√≠veis</h2>
                    <div class="debug-scripts-grid">
                        <div class="debug-card">
                            <h4>analyze_missing_skus.py</h4>
                            <p>Analisa por que alguns produtos n√£o s√£o importados (SKU inv√°lido/vazio)</p>
                            <code>python analyze_missing_skus.py [pages]</code>
                        </div>
                        <div class="debug-card">
                            <h4>debug_pagination.py</h4>
                            <p>Verifica se a pagina√ß√£o da API est√° funcionando corretamente</p>
                            <code>python debug_pagination.py</code>
                        </div>
                        <div class="debug-card">
                            <h4>debug_response_structure.py</h4>
                            <p>Analisa a estrutura exata da resposta da API do Cubo</p>
                            <code>python debug_response_structure.py</code>
                        </div>
                        <div class="debug-card">
                            <h4>peek_cubo_page.py</h4>
                            <p>Visualiza estrutura de uma p√°gina do Cubo (simples, sem deps)</p>
                            <code>python peek_cubo_page.py</code>
                        </div>
                        <div class="debug-card">
                            <h4>test_pagination_bug.py</h4>
                            <p>Identifica exatamente onde a pagina√ß√£o para de funcionar</p>
                            <code>python test_pagination_bug.py</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Requirements Section -->
            <section id="requirements" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">requirements.txt</span>
                    <h1>Depend√™ncias Python</h1>
                    <p class="section-subtitle">Pacotes necess√°rios para executar o projeto</p>
                </div>

                <div class="card">
                    <h2>üì¶ Depend√™ncias</h2>
                    <div class="deps-grid">
                        <div class="dep-card">
                            <div class="dep-name">fastapi</div>
                            <div class="dep-desc">Framework web para a API</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">uvicorn[standard]</div>
                            <div class="dep-desc">Servidor ASGI para rodar FastAPI</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">psycopg2-binary</div>
                            <div class="dep-desc">Driver PostgreSQL</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">python-dotenv</div>
                            <div class="dep-desc">Carregar vari√°veis do .env</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">openai</div>
                            <div class="dep-desc">Gerar embeddings</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">tiktoken</div>
                            <div class="dep-desc">Contar tokens para chunking</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">requests</div>
                            <div class="dep-desc">Requisi√ß√µes HTTP</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">pandas</div>
                            <div class="dep-desc">Processamento de CSV</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">tqdm</div>
                            <div class="dep-desc">Barras de progresso</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>‚ö° Instala√ß√£o</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Criar ambiente virtual (recomendado)</span>
python -m venv .venv

<span class="comment"># Ativar ambiente</span>
<span class="comment"># Windows:</span>
.venv\Scripts\activate
<span class="comment"># Linux/Mac:</span>
source .venv/bin/activate

<span class="comment"># Instalar depend√™ncias</span>
pip install -r requirements.txt</code></pre>
                    </div>
                </div>
            </section>

            <!-- Deploy Fly.io Section -->
            <section id="deploy-flyio" class="doc-section">
                <div class="section-header">
                    <span class="file-badge">deploy-fly-io.md</span>
                    <h1>Deploy na Fly.io</h1>
                    <p class="section-subtitle">Guia completo para fazer deploy desta aplica√ß√£o FastAPI na Fly.io</p>
                </div>

                <div class="card highlight-card">
                    <h2>üöÄ O que √© a Fly.io?</h2>
                    <p>A <strong>Fly.io</strong> √© uma plataforma de hospedagem global que permite rodar aplica√ß√µes pr√≥ximas dos seus usu√°rios, oferecendo auto-scaling, networking privado e infraestrutura gerenciada.</p>
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">üåç</span>
                        <h3>Deploy Global</h3>
                        <p>Execute sua aplica√ß√£o em m√∫ltiplas regi√µes simultaneamente</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">‚ö°</span>
                        <h3>Auto-scaling</h3>
                        <p>M√°quinas param quando ociosas, economizando custos</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üîí</span>
                        <h3>HTTPS Gr√°tis</h3>
                        <p>Certificados SSL autom√°ticos e gratuitos</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üí∞</span>
                        <h3>Plano Gratuito</h3>
                        <p>3 VMs compartilhadas e 3GB de armazenamento gr√°tis</p>
                    </div>
                </div>

                <div class="card">
                    <h2>üìã Pr√©-requisitos</h2>
                    <div class="env-table">
                        <div class="env-group">
                            <h4>Requisitos</h4>
                            <div class="env-item"><code>Git</code><span>Controle de vers√£o</span></div>
                            <div class="env-item"><code>Python 3.10+</code><span>Para testes locais</span></div>
                            <div class="env-item"><code>Conta Fly.io</code><span>fly.io/app/sign-up</span></div>
                        </div>
                        <div class="env-group">
                            <h4>Vari√°veis de Ambiente</h4>
                            <div class="env-item"><code>DB_*</code><span>Configura√ß√£o PostgreSQL</span></div>
                            <div class="env-item"><code>OPENAI_API_KEY</code><span>API OpenAI</span></div>
                            <div class="env-item"><code>VTEX_*</code><span>Integra√ß√£o VTEX</span></div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>1Ô∏è‚É£ Instala√ß√£o do Fly CLI</h2>
                    <p>O <strong>flyctl</strong> (ou <code>fly</code>) √© a ferramenta de linha de comando para interagir com a Fly.io.</p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">Windows (PowerShell)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code>pwsh -Command "iwr https://fly.io/install.ps1 -useb | iex"</code></pre>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">macOS (Homebrew)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code>brew install flyctl</code></pre>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">Linux/macOS (Script)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code>curl -L https://fly.io/install.sh | sh</code></pre>
                    </div>

                    <p class="info-text">‚úÖ Verificar instala√ß√£o: <code>fly version</code></p>
                </div>

                <div class="card">
                    <h2>2Ô∏è‚É£ Autentica√ß√£o</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Criar conta (se necess√°rio)</span>
fly auth signup

<span class="comment"># Login (conta existente)</span>
fly auth login</code></pre>
                    </div>
                    <p class="info-text">üìå O navegador ser√° aberto automaticamente para autentica√ß√£o.</p>
                </div>

                <div class="card">
                    <h2>3Ô∏è‚É£ Criar o Dockerfile</h2>
                    <p>Crie um arquivo <code>Dockerfile</code> na raiz do projeto:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">dockerfile</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Imagem base Python</span>
<span class="keyword">FROM</span> python:3.11-slim-bookworm

<span class="comment"># Vari√°veis de ambiente</span>
<span class="keyword">ENV</span> PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PIP_NO_CACHE_DIR=1

<span class="comment"># Diret√≥rio de trabalho</span>
<span class="keyword">WORKDIR</span> /app

<span class="comment"># Instalar depend√™ncias do sistema</span>
<span class="keyword">RUN</span> apt-get update && apt-get install -y --no-install-recommends \
    gcc libpq-dev && rm -rf /var/lib/apt/lists/*

<span class="comment"># Copiar e instalar depend√™ncias Python</span>
<span class="keyword">COPY</span> requirements.txt .
<span class="keyword">RUN</span> pip install --upgrade pip && pip install -r requirements.txt

<span class="comment"># Copiar c√≥digo da aplica√ß√£o</span>
<span class="keyword">COPY</span> . .

<span class="comment"># Expor porta</span>
<span class="keyword">EXPOSE</span> 8000

<span class="comment"># Comando de inicializa√ß√£o</span>
<span class="keyword">CMD</span> ["uvicorn", "api:app", "--host", "0.0.0.0", "--port", "8000"]</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>4Ô∏è‚É£ Configurar fly.toml</h2>
                    <p>Execute <code>fly launch --no-deploy</code> ou crie manualmente:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">toml</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Nome da aplica√ß√£o (deve ser √∫nico!)</span>
app = <span class="string">"search-products-api"</span>

<span class="comment"># Regi√£o principal (gru = S√£o Paulo)</span>
primary_region = <span class="string">"gru"</span>

[build]
  dockerfile = <span class="string">"Dockerfile"</span>

[http_service]
  internal_port = <span class="number">8000</span>
  force_https = <span class="keyword">true</span>
  auto_stop_machines = <span class="string">"stop"</span>
  auto_start_machines = <span class="keyword">true</span>
  min_machines_running = <span class="number">0</span>

[[vm]]
  cpu_kind = <span class="string">"shared"</span>
  cpus = <span class="number">1</span>
  memory = <span class="string">"512mb"</span></code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>5Ô∏è‚É£ Configurar Secrets (Vari√°veis Sens√≠veis)</h2>
                    <p class="info-text">‚ö†Ô∏è <strong>IMPORTANTE:</strong> Nunca coloque senhas ou API keys no <code>fly.toml</code>!</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Banco de dados PostgreSQL</span>
fly secrets set DB_HOST="seu-host-postgres.exemplo.com"
fly secrets set DB_PORT="5432"
fly secrets set DB_USER="seu_usuario"
fly secrets set DB_PASSWORD="sua_senha_segura"
fly secrets set DB_NAME="nome_do_banco"

<span class="comment"># OpenAI API</span>
fly secrets set OPENAI_API_KEY="sk-xxxxxxxxxxxxxxxxxxxxx"

<span class="comment"># VTEX (se aplic√°vel)</span>
fly secrets set VTEX_APP_KEY="sua_vtex_app_key"
fly secrets set VTEX_APP_TOKEN="seu_vtex_app_token"
fly secrets set VTEX_ACCOUNT_HOST="sua-loja.myvtex.com"

<span class="comment"># Verificar secrets configurados</span>
fly secrets list</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h2>6Ô∏è‚É£ Deploy da Aplica√ß√£o</h2>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">bash</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code><span class="comment"># Fazer o deploy</span>
fly deploy

<span class="comment"># Verificar status</span>
fly status

<span class="comment"># Abrir no navegador</span>
fly open</code></pre>
                    </div>
                    
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <span class="flow-icon">üì¶</span>
                            <span class="flow-label">Build</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">‚¨ÜÔ∏è</span>
                            <span class="flow-label">Push</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">üöÄ</span>
                            <span class="flow-label">Deploy</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">‚úÖ</span>
                            <span class="flow-label">Health Check</span>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <span class="flow-icon">üåê</span>
                            <span class="flow-label">Online!</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üîß Comandos √öteis</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Comando</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>fly status</code></td>
                                <td>Ver status da aplica√ß√£o</td>
                            </tr>
                            <tr>
                                <td><code>fly logs</code></td>
                                <td>Ver logs em tempo real</td>
                            </tr>
                            <tr>
                                <td><code>fly open</code></td>
                                <td>Abrir aplica√ß√£o no navegador</td>
                            </tr>
                            <tr>
                                <td><code>fly ssh console</code></td>
                                <td>Acessar terminal da m√°quina</td>
                            </tr>
                            <tr>
                                <td><code>fly apps restart</code></td>
                                <td>Reiniciar a aplica√ß√£o</td>
                            </tr>
                            <tr>
                                <td><code>fly scale count 2</code></td>
                                <td>Escalar para 2 m√°quinas</td>
                            </tr>
                            <tr>
                                <td><code>fly scale memory 1024</code></td>
                                <td>Aumentar RAM para 1GB</td>
                            </tr>
                            <tr>
                                <td><code>fly releases</code></td>
                                <td>Ver hist√≥rico de releases</td>
                            </tr>
                            <tr>
                                <td><code>fly releases rollback</code></td>
                                <td>Voltar para vers√£o anterior</td>
                            </tr>
                            <tr>
                                <td><code>fly dashboard</code></td>
                                <td>Abrir painel de m√©tricas</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>üåé Regi√µes Dispon√≠veis</h2>
                    <div class="deps-grid">
                        <div class="dep-card">
                            <div class="dep-name">gru</div>
                            <div class="dep-desc">üáßüá∑ S√£o Paulo, Brasil</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">iad</div>
                            <div class="dep-desc">üá∫üá∏ Virginia, EUA</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">ewr</div>
                            <div class="dep-desc">üá∫üá∏ New Jersey, EUA</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">lhr</div>
                            <div class="dep-desc">üá¨üáß Londres, UK</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">fra</div>
                            <div class="dep-desc">üá©üá™ Frankfurt, Alemanha</div>
                        </div>
                        <div class="dep-card">
                            <div class="dep-name">nrt</div>
                            <div class="dep-desc">üáØüáµ T√≥quio, Jap√£o</div>
                        </div>
                    </div>
                    <p class="info-text">üìç Ver todas: <code>fly platform regions</code></p>
                </div>

                <div class="card">
                    <h2>‚ö†Ô∏è Troubleshooting</h2>
                    <div class="debug-scripts-grid">
                        <div class="debug-card">
                            <h4>Deploy falha no build</h4>
                            <p>Verifique se <code>requirements.txt</code> est√° correto e adicione depend√™ncias do sistema no Dockerfile.</p>
                            <code>apt-get install gcc libpq-dev</code>
                        </div>
                        <div class="debug-card">
                            <h4>Health check falha</h4>
                            <p>Verifique os logs com <code>fly logs</code> e confirme que a porta √© 8000.</p>
                            <code>fly logs --tail</code>
                        </div>
                        <div class="debug-card">
                            <h4>Erro de conex√£o com banco</h4>
                            <p>Verifique se o banco permite conex√µes externas e os secrets est√£o configurados.</p>
                            <code>fly secrets list</code>
                        </div>
                        <div class="debug-card">
                            <h4>Cold start lento</h4>
                            <p>Configure <code>min_machines_running = 1</code> no fly.toml para manter m√°quina ativa.</p>
                            <code>min_machines_running = 1</code>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>‚úÖ Checklist de Deploy</h2>
                    <div class="functions-list">
                        <div class="function-item">
                            <h4><code>[ ]</code> Fly CLI instalado</h4>
                            <p>Verificar com: <code>fly version</code></p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> Autenticado</h4>
                            <p>Login realizado com: <code>fly auth login</code></p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> Dockerfile criado</h4>
                            <p>Testado localmente com: <code>docker build -t api .</code></p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> .dockerignore configurado</h4>
                            <p>Sem arquivos .env no container!</p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> fly.toml configurado</h4>
                            <p>Nome √∫nico da app definido</p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> Secrets configurados</h4>
                            <p>Todos os secrets necess√°rios: <code>fly secrets set ...</code></p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> Deploy executado</h4>
                            <p>Comando: <code>fly deploy</code></p>
                        </div>
                        <div class="function-item">
                            <h4><code>[ ]</code> Aplica√ß√£o testada</h4>
                            <p>Abrir no navegador: <code>fly open</code></p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>üìö Recursos Adicionais</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Recurso</th>
                                <th>Link</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Documenta√ß√£o oficial</td>
                                <td><a href="https://fly.io/docs" target="_blank" style="color: var(--accent-primary);">fly.io/docs</a></td>
                            </tr>
                            <tr>
                                <td>Status da plataforma</td>
                                <td><a href="https://status.fly.io" target="_blank" style="color: var(--accent-primary);">status.fly.io</a></td>
                            </tr>
                            <tr>
                                <td>Comunidade</td>
                                <td><a href="https://community.fly.io" target="_blank" style="color: var(--accent-primary);">community.fly.io</a></td>
                            </tr>
                            <tr>
                                <td>Pre√ßos</td>
                                <td><a href="https://fly.io/pricing" target="_blank" style="color: var(--accent-primary);">fly.io/pricing</a></td>
                            </tr>
                            <tr>
                                <td>Documenta√ß√£o completa MD</td>
                                <td><a href="../docs/deploy-fly-io.md" style="color: var(--accent-primary);">docs/deploy-fly-io.md</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <footer class="page-footer">
            <p>Search Products API ‚Ä¢ Documenta√ß√£o T√©cnica</p>
        </footer>
    </main>

    <script src="script.js"></script>
</body>
</html>

